(this.webpackJsonpbacon=this.webpackJsonpbacon||[]).push([[0],{14:function(e,t,n){},15:function(e,t,n){},17:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n(1),r=n.n(a),s=n(7),i=n.n(s),u=(n(14),n(2)),j=n(8),o=function(e){var t=e.states,n=e.genres,r=e.states||e.genres,s=Object(a.useState)(),i=Object(u.a)(s,2),j=i[0],o=i[1];Object(a.useEffect)((function(){t&&e.onAddStateFilter(j),n&&e.onAddGenreFilterHandler(j)}),[j]);return Object(c.jsx)("div",{children:Object(c.jsxs)("select",{name:"states",id:"states",onChange:function(e){e.preventDefault(),o(e.target.value)},children:[Object(c.jsx)("option",{value:"all",defaultValue:!0,children:"All"}),r&&r.map((function(e){return Object(c.jsx)("option",{value:e,children:e},e)})),";"]})})},l=function(e){for(var t=e.rowsPerPage,n=e.totalRows,a=e.onPaginate,r=[],s=1;s<=Math.ceil(n/t);s++)r.push(s);return Object(c.jsx)("nav",{children:Object(c.jsx)("ul",{className:"pagination",children:r.map((function(e){return Object(c.jsx)("li",{className:"page-item",children:Object(c.jsx)("a",{className:"page-link",onClick:function(){return a(e)},href:"!#",children:e})},e)}))})})},b=function(e){var t=Object(a.useState)(""),n=Object(u.a)(t,2),r=n[0],s=n[1],i=Object(a.useState)(!1),j=Object(u.a)(i,2),o=j[0],l=j[1];Object(a.useEffect)((function(){e.onSearch(r,o)}),[o]);return Object(c.jsxs)("div",{className:"input-group col-md-3",children:[Object(c.jsx)("input",{type:"text",name:"search",value:r,onChange:function(e){return s(e.target.value)},className:"form-control"}),Object(c.jsxs)("div",{className:"input-group-append",children:[o&&Object(c.jsx)("button",{type:"submit",value:"x",onClick:function(e){e.preventDefault(),s(""),l(!1)},className:"btn btn-outline-danger",children:"Cancel"}),!o&&Object(c.jsx)("button",{type:"submit",value:"Search",onClick:function(e){e.preventDefault(),l(!0)},className:"btn btn-outline-success",children:"Search"})]})]})},O=n(6);function f(e,t){for(var n=t,c=e,a=[],r=0;r<c.length;r++)c[r].genre.includes(n)&&a.push(c[r]);return a}function d(e,t){for(var n=t,c=e,a=[],r=0;r<c.length;r++)c[r].state===n&&a.push(c[r]);return a}var h=function(e,t,n){var a=[];if(!(e.length>0))return Object(c.jsx)("tr",{children:Object(c.jsx)("td",{colSpan:"5",children:"no restaurants found"})});for(var r=n;r<t;r++){var s=e[r];a.push(s)}return a},x=function(e){var t=e.restaurants,n=j,r=Object(a.useState)([]),s=Object(u.a)(r,2),i=s[0],x=s[1],p=Object(a.useState)(),v=Object(u.a)(p,2),g=v[0],m=v[1],S=Object(a.useState)(),N=Object(u.a)(S,2),A=N[0],C=N[1],E=Object(a.useState)([]),M=Object(u.a)(E,2),P=M[0],w=M[1],I=Object(a.useState)(""),L=Object(u.a)(I,2),D=L[0],F=L[1],y=Object(a.useState)(!1),T=Object(u.a)(y,2),k=T[0],H=T[1],R=Object(a.useState)(1),V=Object(u.a)(R,2),G=V[0],K=V[1],W=10*G,J=W-10;function B(e,t,n,c){Y(function(e,t,n,c){var a=[],r=t.toLowerCase();return e.forEach((function(e){(e.name.toLowerCase().includes(r)||e.city.toLowerCase().includes(r)||e.genre.toLowerCase().includes(r))&&a.push(e)})),n&&"all"!==n||c&&"all"!==c?a=c&&"all"!==c?n&&"all"!==n?d(f(a,c),n):f(a,c):d(a,n):a}(e,t,n,c))}function Y(e){var t=function(e){var t=Object(O.a)(e);return t.sort((function(e,t){return e.name<t.name?-1:e.name>t.name?1:0})),t}(e);x(t.map((function(e){return Object(c.jsxs)("tr",{children:[Object(c.jsx)("td",{children:e.name}),Object(c.jsx)("td",{children:e.city}),Object(c.jsx)("td",{children:e.state}),Object(c.jsx)("td",{children:e.telephone}),Object(c.jsx)("td",{children:e.genre})]},e.id)})))}Object(a.useEffect)((function(){Y(t),function(e,t){var n=[];e.forEach((function(e){var t=[];t.push(e.genre),t.forEach((function(e){e.split(",").forEach((function(e){n.push(e)}))}))})),t(Object(O.a)(new Set(n)))}(t,w)}),[t]),Object(a.useEffect)((function(){D?B(t,D,g,A):function(e,t){Y("all"===t?e:d(e,t))}(t,g)}),[g]),Object(a.useEffect)((function(){D?B(t,D,g,A):function(e,t){Y("all"===t?e:f(e,t))}(t,A)}),[A]),Object(a.useEffect)((function(){B(t,D)}),[D]),Object(a.useEffect)((function(){k||Y(t)}),[k]);return Object(c.jsxs)("div",{children:[Object(c.jsx)(b,{onSearch:function(e,t){F(e),H(t)}}),Object(c.jsxs)("table",{className:"table",children:[Object(c.jsx)("thead",{children:Object(c.jsxs)("tr",{children:[Object(c.jsx)("th",{children:"name"}),Object(c.jsx)("th",{children:"city"}),Object(c.jsxs)("th",{children:["state",Object(c.jsx)("br",{}),Object(c.jsx)(o,{states:n,onAddStateFilter:function(e){m(e)}})]}),Object(c.jsx)("th",{children:"telephone"}),Object(c.jsxs)("th",{children:["genre",Object(c.jsx)("br",{}),Object(c.jsx)(o,{genres:P,onAddGenreFilterHandler:function(e){C(e)}})]})]})}),Object(c.jsx)("tbody",{children:h(i,W,J)})]}),Object(c.jsx)(l,{rowsPerPage:10,totalRows:i.length,onPaginate:function(e){K(e)}})]})};n(15),n(16);var p=function(){var e=Object(a.useState)(null),t=Object(u.a)(e,2),n=t[0],r=t[1],s=Object(a.useState)(!1),i=Object(u.a)(s,2),j=i[0],o=i[1],l=Object(a.useState)([]),b=Object(u.a)(l,2),O=b[0],f=b[1];return Object(a.useEffect)((function(){fetch("https://code-challenge.spectrumtoolbox.com/api/restaurants",{headers:{Authorization:"Api-Key q3MNxtfep8Gt"}}).then((function(e){return e.json()})).then((function(e){o(!0),f(e)}),(function(e){o(!0),r(e)}))}),[]),n?Object(c.jsxs)("div",{children:["Error: ",n.message]}):j?Object(c.jsxs)("div",{children:[Object(c.jsx)("div",{className:"container",children:Object(c.jsx)("h1",{children:"BACON"})}),Object(c.jsx)("div",{className:"container",children:Object(c.jsx)(x,{restaurants:O})})]}):Object(c.jsx)("div",{children:"Loading..."})},v=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,18)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),c(e),a(e),r(e),s(e)}))};i.a.render(Object(c.jsx)(r.a.StrictMode,{children:Object(c.jsx)(p,{})}),document.getElementById("root")),v()},8:function(e){e.exports=JSON.parse('["AL","AK","AS","AZ","AR","CA","CO","CT","DE","DC","FM","FL","GA","GU","HI","ID","IL","IN","IA","KS","KY","LA","ME","MH","MD","MA","MI","MN","MS","MO","MT","NE","NV","NH","NJ","NM","NY","NC","ND","MP","OH","OK","OR","PW","PA","PR","RI","SC","SD","TN","TX","UT","VT","VI","VA","WA","WV","WI","WY"]')}},[[17,1,2]]]);
//# sourceMappingURL=main.b82ae9db.chunk.js.map